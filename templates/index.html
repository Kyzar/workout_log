{% extends "base.html" %}
{% block head %}
  {{ super() }}
  <link rel="stylesheet" href="{{ url_for('static', filename='css/index_style.css') }}">
  <script src="{{ url_for('static', filename='js/exercises.js') }}"></script>
{% endblock %}

{% block body %}
<!-- angular controller -->
<div ng-controller='WorkoutLogController'>
  <!-- date time for today -->
  <div class='datetime_today row'>
    <div class='date_today col-xs-12'>{{ date }}</div>
    <div class='curr_time col-xs-12'>{{ curr_time }}</div>
  </div>

  <!-- entry for today -->
  <article class='entry_container'>
    <div class='exercise_count'>
      You have done {[ strExercises.length ]} exercises today.
    </div>

    <form action="{{ url_for('add_entry') }}" method='post' class='add_entry'>
      <!-- strength exercises -->
      <div class='table-responsive'>
        <table class='table str_exercises'>
          <th>Sets</th>
          <th>Reps</th>
          <th>Weight</th>
          <th>Exercise</th>
          <th>Remove</th>
          <tr ng-repeat='ex in strExercises'>
            <td><input type='number' name='sets' min='0' ng-model='ex.sets'></td>
            <td><input type='number' name='reps' min='0' ng-model='ex.reps'></td>
            <td><input type='number' name='weight' min='0' ng-model='ex.weight'></td>
            <td><input type='text' name='exercise' ng-model='ex.name'></td>
            <td><a href='#' class='btn btn-primary' ng-click='removeExercise(ex)'>X</a></td>
          </tr>
        </table>
      </div>

      <!-- add exercise to workout button -->
      <a href='#' class="btn btn-success add_exercise_btn" data-toggle="modal" data-target="#str_exercises_modal">Add Exercise</a>

      <!-- saving entry -->
      {% if session.logged_in %}
        <input type='submit' value='Save Entry'>
      {% endif %}
    </form>
  </article>

  <!-- Popup modal for adding a strength exercise -->
  <div class='modal fade' id='str_exercises_modal' tabindex='-1' role='dialog' aria-labelledby='str_exercises_modal' aria-hidden='true'>
    <div class='modal-dialog modal-lg'>
      <div class='modal-content'>
        <div class='modal-header'>
          <button type='button' class='close' data-dismiss='modal' aria-hidden='true'>x</button>
          <h4 class='modal-title'>Add Exercise to Workout</h4>
        </div>
        <div class='modal-body'>
          <!-- new exercise form -->
          <form ng-submit='addExercise()'>
            <div class='form-group add_exercise_input'>
              <label for='newExerciseSets'>Sets</label>
              <input type='number' class='form-control' min='0' ng-model='newExerciseSets'>
            </div>
            <div class='form-group add_exercise_input'>
              <label for='newExerciseReps'>Reps</label>
              <input type='number' class='form-control' min='0' ng-model='newExerciseReps'>
            </div>
            <div class='form-group add_exercise_input'>
              <label for='newExerciseWeight'>Weight</label>
              <div class='input-group'>
                <input type='number' class='form-control' min='0' ng-model='newExerciseWeight'>
                <span class="input-group-addon">lbs.</span>
              </div>
            </div>
            <div class='form-group add_exercise_input'>
              <label for='newExerciseName'>Name</label>
              <input type='number' class='form-control' min='0' ng-model='newExerciseName' required>
            </div>
          </form>
        </div>
        <div class='modal-footer'>
          <!-- <button type='button' class='btn btn-default' data-dismiss='modal'>Close</button> -->
          <button type='button' class='btn btn-primary btn-lg' \
                  data-dismiss='modal' ng-click='addExercise()'>Add</button>
        </div>
      </div>
    </div>
  </div>
</div> <!-- ng-controller -->
{% endblock %}